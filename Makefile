all:
	taxvamb_benchmark --help
emtpy_test_data-from_bamfiles:
	taxvamb_benchmark  --output ./test_results/empty_test_data-from_reads --bam_contig ./data_configs/bam_assembly.tsv --snakemake_arguments '-p  --software-deployment-method apptainer'
emtpy_test_data-from_reads:
	taxvamb_benchmark -n --output ./test_results/empty_test_data-from_reads --reads ./data_configs/reads.tsv --snakemake_arguments '-p' 
realsample_data-from_spades:
	taxvamb_benchmark --threads 40 --output ../realsample_data-from_spades  --reads_and_assembly_dir ./data_configs/spades_file.tsv --snakemake_arguments '-p' 
realsample_data-airways_from_bam:
	taxvamb_benchmark --threads 40 --output ../airways  --bam_contig ./data_configs/airways_bamfile_contigs.tsv --snakemake_arguments '-p --software-deployment-method apptainer' 
conda: 
	ls .snakemake/conda/ | grep .yaml | fzf  --preview 'cat .snakemake/conda/{}' | sed 's/.yaml//'
realsample_data-airways_from_bam_esrum:
	taxvamb_benchmark --threads 40 --output ../airways  --bam_contig ./data_configs/esrum_airways_bamfile_contigs.tsv --snakemake_arguments '-p --keep-going --software-deployment-method apptainer' 
np_realsample_data-airways_from_bam_esrum:
	taxvamb_benchmark -n --threads 40 --output ../airways  --bam_contig ./data_configs/esrum_airways_bamfile_contigs.tsv --snakemake_arguments '-p --keep-going --software-deployment-method apptainer' 
output_different_realsample_data-airways_from_bam_esrum:
	taxvamb_benchmark --threads 40 --output airways  --bam_contig taxvamb_paper_benchmarks/data_configs/esrum_airways_bamfile_contigs.tsv --snakemake_arguments '-p --keep-going --software-deployment-method apptainer' 
# metabuli:
pure_snakemake:
	/maps/projects/rasmussen/people/bxc755/conda_env/conda/bin/snakemake --snakefile /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/snakefile.smk --rerun-triggers mtime --nolock -c 40 -p --keep-going --software-deployment-method apptainer --use-conda --rerun-incomplete --keep-incomplete --config bam_contig=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/data_configs/esrum_airways_bamfile_contigs.tsv output_directory=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --directory /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways 
np_pure_snakemake:
	/maps/projects/rasmussen/people/bxc755/conda_env/conda/bin/snakemake  -n --snakefile /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/snakefile.smk --nolock -c 40 -p --keep-going --software-deployment-method apptainer --use-conda --rerun-incomplete --keep-incomplete --config bam_contig=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/data_configs/esrum_airways_bamfile_contigs.tsv output_directory=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --directory /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --keep-going 
cluster_pure_snakemake:
	/maps/projects/rasmussen/people/bxc755/conda_env/conda/bin/snakemake  --snakefile /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/snakefile.smk  -c 200 --nolock -p  --keep-going --software-deployment-method apptainer --use-conda --rerun-incomplete --keep-incomplete --config bam_contig=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/data_configs/all_files_esrum_airways_bamfile_contigs.py output_directory=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --directory /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --jobs 12 --max-jobs-per-second 12 --max-status-checks-per-second 5 --executor cluster-generic --cluster-generic-submit-cmd "sbatch --job-name {rule}  --time={resources.walltime} --cpus-per-task {threads} --mem {resources.mem_gb}G"  
class_cluster_pure_snakemake:
	/maps/projects/rasmussen/people/bxc755/conda_env/conda/bin/snakemake  --snakefile /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/classifiers_snakefile.smk  -c 200 --nolock  -p  --keep-going --software-deployment-method apptainer --use-conda --rerun-incomplete --keep-incomplete --config bam_contig=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/data_configs/all_files_esrum_airways_bamfile_contigs.py output_directory=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --directory /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --jobs 6 --max-jobs-per-second 6 --max-status-checks-per-second 5 --executor cluster-generic --cluster-generic-submit-cmd "sbatch --job-name {rule}  --time={resources.walltime} --cpus-per-task {threads} --mem {resources.mem_gb}G"  
only_bio_class_cluster_pure_snakemake:
	/maps/projects/rasmussen/people/bxc755/conda_env/conda/bin/snakemake  --snakefile /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/classifiers_snakefile.smk  -c 200 --nolock  -p  --keep-going --software-deployment-method apptainer --use-conda --rerun-incomplete --keep-incomplete --config bam_contig=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/data_configs/esrum_airways_bamfile_contigs.tsv output_directory=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --directory /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --jobs 3 --max-jobs-per-second 3 --max-status-checks-per-second 5 --executor cluster-generic --cluster-generic-submit-cmd "sbatch --job-name {rule}  --time={resources.walltime} --cpus-per-task {threads} --mem {resources.mem_gb}G"  
mm:
	mmseqs easy-taxonomy /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways/Airways/contigs.fasta.gz /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/create_db/gtdb_mmseqs mm_result tmp


db_pure_snakemake:
	/maps/projects/rasmussen/people/bxc755/conda_env/conda/bin/snakemake --snakefile /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/db_snakefile.smk --rerun-triggers mtime --nolock -c 40 -p --keep-going --software-deployment-method apptainer --use-conda --rerun-incomplete --keep-incomplete --config bam_contig=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/data_configs/db_esrum_airways_bamfile_contigs.tsv output_directory=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --directory /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways 
db_np_pure_snakemake:
	/maps/projects/rasmussen/people/bxc755/conda_env/conda/bin/snakemake  -n --snakefile /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/db_snakefile.smk --rerun-triggers mtime --nolock -c 40 -p --keep-going --software-deployment-method apptainer --use-conda --rerun-incomplete --keep-incomplete --config bam_contig=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/data_configs/esrum_airways_bamfile_contigs.tsv output_directory=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --directory /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --keep-going
db_cluster_pure_snakemake:
	/maps/projects/rasmussen/people/bxc755/conda_env/conda/bin/snakemake --snakefile /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/db_snakefile.smk --rerun-triggers mtime --nolock -c 40 -p --keep-going --software-deployment-method apptainer --use-conda --rerun-incomplete --keep-incomplete --config bam_contig=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/data_configs/esrum_airways_bamfile_contigs.tsv output_directory=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --directory /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --jobs 2 --max-jobs-per-second 5 --max-status-checks-per-second 5 --executor cluster-generic --cluster-generic-submit-cmd "sbatch --job-name {rule}  --time={resources.walltime} --cpus-per-task {threads} --mem {resources.mem_gb}G" 
gunc_cluster_pure_snakemake:
	/maps/projects/rasmussen/people/bxc755/conda_env/conda/bin/snakemake -n  --snakefile /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/classifiers_snakefile.smk  -c 200 --nolock  -p  --rerun-triggers mtime --keep-going --software-deployment-method apptainer --use-conda --rerun-incomplete --keep-incomplete --config bam_contig=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/data_configs/some_esrum_airways_bamfile_contigs.tsv output_directory=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --directory /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --jobs 1 --max-jobs-per-second 1 --max-status-checks-per-second 5 --executor cluster-generic --cluster-generic-submit-cmd "sbatch --job-name {rule}  --time={resources.walltime} --cpus-per-task {threads} --mem {resources.mem_gb}G"
squeue:
	squeue --format="%.18i %.9P %.30j %.8u %.8T %.10M %.9l %.6D %R" --me
fixed_cluster_snakemake:
	/maps/projects/rasmussen/people/bxc755/conda_env/conda/bin/snakemake   -n --snakefile /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/fixed_classifiers_snakefile.smk  -c 200 --nolock  -p  --rerun-triggers mtime --keep-going --software-deployment-method apptainer --use-conda --rerun-incomplete --keep-incomplete --config bam_contig=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/data_configs/some_esrum_airways_bamfile_contigs.tsv output_directory=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --directory /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --jobs 1 --max-jobs-per-second 1 --max-status-checks-per-second 5 --executor cluster-generic --cluster-generic-submit-cmd "sbatch --job-name {rule}  --time={resources.walltime} --cpus-per-task {threads} --mem {resources.mem_gb}G"   -R gunc
BIO_DATA_RUNS:
	/maps/projects/rasmussen/people/bxc755/conda_env/conda/bin/snakemake  -n -p --snakefile /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/classifiers_snakefile.smk  -c 200 --nolock    --rerun-triggers mtime --keep-going --software-deployment-method apptainer --use-conda --rerun-incomplete --keep-incomplete --config bam_contig=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/data_configs/BIODATA.py output_directory=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --directory /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --jobs 6 --max-jobs-per-second 6 --max-status-checks-per-second 6 --executor cluster-generic --cluster-generic-submit-cmd "sbatch --job-name {rule}  --time={resources.walltime} --cpus-per-task {threads} --mem {resources.mem_gb}G {resources.gpu}" -R metabuli #-R run_taxvamb_trembl run_taxvamb_kalmari -R format_bins_taxvamb_gtdb
Airways:
	/maps/projects/rasmussen/people/bxc755/conda_env/conda/bin/snakemake -p --snakefile /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/classifiers_snakefile.smk  -c 200 --nolock    --rerun-triggers mtime --keep-going --software-deployment-method apptainer --use-conda --rerun-incomplete --keep-incomplete --config bam_contig=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/data_configs/air_all_files_esrum_airways_bamfile_contigs.py output_directory=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --directory /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --jobs 9 --max-jobs-per-second 9 --max-status-checks-per-second 9 --executor cluster-generic --cluster-generic-submit-cmd "sbatch --job-name {rule}  --time={resources.walltime} --cpus-per-task {threads} --mem {resources.mem_gb}G {resources.gpu}" airways
Biotest:
	/maps/projects/rasmussen/people/bxc755/conda_env/conda/bin/snakemake -n  -p --snakefile /maps/projects/rasmussen/data/taxvamb_benchmarks/taxvamb_benchmarks/taxvamb_paper_benchmarks/classifiers_snakefile.smk  -c 200 --nolock    --rerun-triggers mtime --keep-going --software-deployment-method apptainer --use-conda --rerun-incomplete --keep-incomplete --config bam_contig=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/data_configs/BIODATA.py output_directory=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/BIODATA --directory /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --jobs 9 --max-jobs-per-second 9 --max-status-checks-per-second 9 --executor cluster-generic --cluster-generic-submit-cmd "sbatch --job-name {rule}  --time={resources.walltime} --cpus-per-task {threads} --mem {resources.mem_gb}G {resources.gpu}" Biotest
Biotest_Airways:
	/maps/projects/rasmussen/people/bxc755/conda_env/conda/bin/snakemake       -p --snakefile /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/classifiers_snakefile.smk  -c 200 --nolock    --rerun-triggers mtime --keep-going --software-deployment-method apptainer --use-conda --rerun-incomplete --keep-incomplete --config bam_contig=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/taxvamb_paper_benchmarks/data_configs/air_all_files_esrum_airways_bamfile_contigs.py output_directory=/maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/BIODATA --directory /maps/projects/rasmussen/people/bxc755/taxvamb_benchmarks/airways --jobs 9 --max-jobs-per-second 9 --max-status-checks-per-second 9 --executor cluster-generic --cluster-generic-submit-cmd "sbatch --job-name {rule}  --time={resources.walltime} --cpus-per-task {threads} --mem {resources.mem_gb}G {resources.gpu}" Biotest_Airways 

